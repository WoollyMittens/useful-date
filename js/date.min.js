/*
	Combined JavaScripts

	@codekit-append "../src/useful.date.js"
	@codekit-append "../../useful-positions/src/useful.positions.js"
	@codekit-append "../../useful-instances/src/useful.instances.js"
	@codekit-append "../../useful-polyfills/src/useful.polyfills.js"
*//* **********************************************
     Begin useful.date.js
********************************************** *//*
	Source:
	van Creij, Maurice (2012). "useful.color.js: Color input element", version 20130510, http://www.woollymittens.nl/.

	License:
	This work is licensed under a Creative Commons Attribution 3.0 Unported License.
*/(function(e){"use strict";e.Date=function(t,n){this.obj=t;this.cfg=n;this.start=function(){var e=this;if(!e.cfg.support){e.setup(e);e.update(e)}};this.setup=function(e){e.cfg.width=e.cfg.width||e.obj.offsetWidth;e.cfg.height=e.cfg.height||e.obj.offsetHeight;e.cfg.container=document.createElement("span");e.cfg.container.className="date";e.obj.parentNode.insertBefore(e.cfg.container,e.obj);e.cfg.container.appendChild(e.obj.parentNode.removeChild(e.obj));e.cfg.button=document.createElement("span");e.cfg.button.innerHTML="<span>"+(new Date).getDate()+"</span>";e.cfg.button.className="date_button date_passive";e.cfg.container.appendChild(e.cfg.button);e.events.reverse(e.obj,e);e.events.pick(e.cfg.button,e);e.events.reset(document.body,e)};this.update=function(e){e.cfg.date?e.obj.value=e.cfg.format.replace("d",e.cfg.date.getDate()).replace("m",e.cfg.date.getMonth()+1).replace("M",e.cfg.months[e.cfg.date.getMonth()]).replace("y",e.cfg.date.getFullYear()):e.cfg.date=new Date};this.events={};this.events.pick=function(e,t){e.addEventListener("click",function(e){t.popup.setup(t);e.preventDefault()},!1)};this.events.reset=function(e,t){e.addEventListener("click",function(e){t.popup.remove(t)},!1)};this.events.reverse=function(e,t){e.addEventListener("keyup",function(){var n,r,i;n=e.value;switch(t.cfg.format){case"d/m/y":r=n.split("/");i=n.length>1?new Date(r[2],r[1]-1,r[0]):new Date(n);break;default:i=new Date(n)}isNaN(i)||(t.cfg.date=i)},!1)};this.popup={};this.popup.setup=function(t){t.cfg.popup&&t.cfg.popup.parentNode.removeChild(t.cfg.popup);t.cfg.hover=!1;t.cfg.popup=document.createElement("div");t.cfg.popup.className="date_popup date_hidden";t.cfg.title=document.createElement("strong");t.cfg.title.innerHTML="{title}";t.cfg.popup.appendChild(t.cfg.title);t.cfg.selectors=document.createElement("div");t.cfg.selectors.className="date_selectors";t.cfg.popup.appendChild(t.cfg.selectors);t.popup.addMonthSelector(t);t.popup.addYearSelector(t);t.cfg.previousMonth=document.createElement("button");t.cfg.previousMonth.className="button date_previous_month";t.cfg.previousMonth.innerHTML="&lt;";t.cfg.popup.appendChild(t.cfg.previousMonth);t.popup.events.previousMonth(t.cfg.previousMonth,t);t.cfg.nextMonth=document.createElement("button");t.cfg.nextMonth.className="button date_next_month";t.cfg.nextMonth.innerHTML="&gt;";t.cfg.popup.appendChild(t.cfg.nextMonth);t.popup.events.nextMonth(t.cfg.nextMonth,t);t.cfg.previousYear=document.createElement("button");t.cfg.previousYear.innerHTML="&lt;&lt;";t.cfg.previousYear.className="button date_previous_year";t.cfg.popup.appendChild(t.cfg.previousYear);t.popup.events.previousYear(t.cfg.previousYear,t);t.cfg.nextYear=document.createElement("button");t.cfg.nextYear.innerHTML="&gt;&gt;";t.cfg.nextYear.className="button date_next_year";t.cfg.popup.appendChild(t.cfg.nextYear);t.popup.events.nextYear(t.cfg.nextYear,t);t.cfg.today=document.createElement("button");t.cfg.today.innerHTML="Today";t.cfg.today.className="button date_today";t.cfg.popup.appendChild(t.cfg.today);t.popup.events.today(t.cfg.today,t);t.cfg.clear=document.createElement("button");t.cfg.clear.innerHTML="Clear";t.cfg.clear.className="button date_clear";t.cfg.popup.appendChild(t.cfg.clear);t.popup.events.clear(t.cfg.clear,t);t.popup.calendar.setup(t);document.body.appendChild(t.cfg.popup);t.cfg.position=e.positions.object(t.cfg.button);t.cfg.limits=e.positions.window();t.cfg.position.x-=t.cfg.position.x+t.cfg.popup.offsetWidth>t.cfg.limits.x?t.cfg.popup.offsetWidth:0;t.cfg.position.y-=t.cfg.position.y+t.cfg.popup.offsetHeight>t.cfg.limits.y?t.cfg.popup.offsetHeight:0;t.cfg.popup.style.left=t.cfg.position.x+"px";t.cfg.popup.style.top=t.cfg.position.y+"px";t.popup.update(t);t.popup.reveal(t);t.popup.events.over(t.cfg.popup,t);t.popup.events.out(t.cfg.popup,t)};this.popup.addMonthSelector=function(e){var t,n,r;e.cfg.monthPicker=document.createElement("select");e.cfg.monthPicker.setAttribute("name","pickmonth");for(t=0,n=e.cfg.months.length;t<n;t+=1){r=document.createElement("option");r.innerHTML=e.cfg.months[t];r.value=t;e.cfg.monthPicker.appendChild(r)}e.popup.events.selectMonth(e.cfg.monthPicker,e);e.cfg.selectors.appendChild(e.cfg.monthPicker)};this.popup.addYearSelector=function(e){var t,n,r;e.cfg.yearPicker=document.createElement("select");e.cfg.yearPicker.setAttribute("name","pickyear");n=e.cfg.years[0];r=(new Date).getFullYear();while(n!==e.cfg.years[1]){t=document.createElement("option");t.innerHTML=r+n;t.value=r+n;e.cfg.yearPicker.appendChild(t);n+=e.cfg.years[0]>e.cfg.years[1]?-1:1}e.popup.events.selectYear(e.cfg.yearPicker,e);e.cfg.selectors.appendChild(e.cfg.yearPicker)};this.popup.update=function(e){var t,n,r,i,s;r=e.cfg.reference.getMonth();i=e.cfg.reference.getFullYear();e.cfg.title.innerHTML=e.cfg.months[r]+" "+i;s=e.cfg.yearPicker.getElementsByTagName("option");for(t=0,n=s.length;t<n;t+=1)s[t].selected=parseInt(s[t].value,10)===i;s=e.cfg.monthPicker.getElementsByTagName("option");for(t=0,n=s.length;t<n;t+=1)s[t].selected=parseInt(s[t].value,10)===r;e.popup.calendar.update(e)};this.popup.doNotClose=function(e){e.cfg.hover=!0;setTimeout(function(){e.cfg.hover=!1},100)};this.popup.reveal=function(e){setTimeout(function(){e.cfg.popup.className=e.cfg.popup.className.replace("date_hidden","date_visible")},100)};this.popup.remove=function(e){e.cfg.popup&&!e.cfg.hover&&(e.cfg.popup.className=e.cfg.popup.className.replace("date_visible","date_hidden"))};this.popup.events={};this.popup.events.clear=function(e,t){e.onclick=function(){t.cfg.date=null;t.obj.value="";t.cfg.hover=!1;t.popup.remove(t);t.update(t);return!1}};this.popup.events.today=function(e,t){e.onclick=function(){t.cfg.date=new Date;t.update(t);t.cfg.hover=!1;t.popup.remove(t);return!1}};this.popup.events.nextMonth=function(e,t){e.onclick=function(){t.cfg.reference=new Date(t.cfg.reference.getFullYear(),t.cfg.reference.getMonth()+1,t.cfg.reference.getDate());t.popup.update(t);return!1}};this.popup.events.previousMonth=function(e,t){e.onclick=function(){t.cfg.reference=new Date(t.cfg.reference.getFullYear(),t.cfg.reference.getMonth()-1,t.cfg.reference.getDate());t.popup.update(t);return!1}};this.popup.events.selectMonth=function(e,t){e.onchange=function(){t.popup.doNotClose(t);t.cfg.reference=new Date(t.cfg.reference.getFullYear(),parseInt(e.value,10),t.cfg.reference.getDate());t.popup.update(t)}};this.popup.events.nextYear=function(e,t){e.onclick=function(){t.cfg.reference=new Date(t.cfg.reference.getFullYear()+1,t.cfg.reference.getMonth(),t.cfg.reference.getDate());t.popup.update(t);return!1}};this.popup.events.previousYear=function(e,t){e.onclick=function(){t.cfg.reference=new Date(t.cfg.reference.getFullYear()-1,t.cfg.reference.getMonth(),t.cfg.reference.getDate());t.popup.update(t);return!1}};this.popup.events.selectYear=function(e,t){e.onchange=function(){t.popup.doNotClose(t);t.cfg.reference=new Date(parseInt(e.value,10),t.cfg.reference.getMonth(),t.cfg.reference.getDate());t.popup.update(t)}};this.popup.events.over=function(e,t){e.onmouseover=function(){t.cfg.hover=!0}};this.popup.events.out=function(e,t){e.onmouseout=function(){t.cfg.hover=!1}};this.popup.calendar={};this.popup.calendar.setup=function(e){e.cfg.reference=new Date(e.cfg.date.getFullYear(),e.cfg.date.getMonth(),1);e.cfg.minimum=new Date(e.obj.getAttribute("min"));isNaN(e.cfg.minimum)&&(e.cfg.minimum=new Date(0));e.cfg.maximum=new Date(e.obj.getAttribute("max"));if(isNaN(e.cfg.maximum)||e.cfg.maximum.getTime()===0)e.cfg.maximum=new Date(2200,1,1);e.cfg.calendar=document.createElement("div");e.cfg.calendar.className="date_calendar";e.cfg.popup.appendChild(e.cfg.calendar)};this.popup.calendar.update=function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p;s=new Date(e.cfg.reference.getFullYear(),e.cfg.reference.getMonth(),1);u=document.createElement("table");a=document.createElement("thead");l=document.createElement("tr");for(t=0,n=7;t<n;t+=1){c=document.createElement("th");c.innerHTML=e.cfg.days[t];t===0?c.className="date_first":t===6&&(c.className="date_last");l.appendChild(c)}a.appendChild(l);u.appendChild(a);f=document.createElement("tbody");o=1;r=7-s.getDay()+1;r>6&&(r=0);i=s.getMonth();while(i===s.getMonth()&&o<32){l=document.createElement("tr");for(t=0,n=7;t<n;t+=1){c=document.createElement("td");if(o-r===s.getDate()){if(s.getTime()>e.cfg.minimum.getTime()&&s.getTime()<e.cfg.maximum.getTime()){h=document.createElement("a");h.innerHTML=s.getDate();h.href="#"+s.getDate()+"-"+(s.getMonth()+1)+"-"+s.getFullYear();c.appendChild(h);e.popup.calendar.events.dateClick(h,new Date(s.getFullYear(),s.getMonth(),s.getDate()),e)}else{p=document.createElement("span");p.innerHTML=s.getDate();c.appendChild(p)}s=new Date(s.getFullYear(),s.getMonth(),s.getDate()+1)}else c.innerHTML="";t===0?c.className="date_first":t===6&&(c.className="date_last");s.getFullYear()===e.cfg.date.getFullYear()&&s.getMonth()===e.cfg.date.getMonth()&&s.getDate()===e.cfg.date.getDate()+1&&(c.className+=" date_current");l.appendChild(c);o+=1}f.appendChild(l)}u.appendChild(f);e.cfg.calendar.innerHTML="";e.cfg.calendar.appendChild(u)};this.popup.calendar.events={};this.popup.calendar.events.dateClick=function(e,t,n){e.onclick=function(){n.cfg.date=t;n.update(n);n.cfg.hover=!1;n.popup.remove(n);return!1}}}})(window.useful=window.useful||{});(function(e){"use strict";var t=t||{};t.window=function(){var e={x:0,y:0};e.x=window.innerWidth||document.body.clientWidth;e.y=window.innerHeight||document.body.clientHeight;return e};t.document=function(e){var t={x:0,y:0};if(e){t.x=e.scrollLeft;t.y=e.scrollTop}else{t.x=window.pageXOffset?window.pageXOffset:document.documentElement?document.documentElement.scrollLeft:document.body.scrollLeft;t.y=window.pageYOffset?window.pageYOffset:document.documentElement?document.documentElement.scrollTop:document.body.scrollTop}return t};t.object=function(e){var t={x:0,y:0};if(e.offsetParent)while(e.offsetParent){t.x+=e.offsetLeft;t.y+=e.offsetTop;e=e.offsetParent}return t};t.cursor=function(e,n){e=e||window.event;var r={x:0,y:0};r.x=e.pageX||e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;r.y=e.pageY||e.clientY+document.body.scrollTop+document.documentElement.scrollTop;if(n){var i=t.object(n);r.x-=i.x;r.y-=i.y}return r};e.positions=e.positions||{};e.positions.window=t.window;e.positions.document=t.document;e.positions.object=t.object;e.positions.cursor=t.cursor})(window.useful=window.useful||{});(function(e){"use strict";e.Instances=function(e,t,n){this.objs=e;this.constructor=t;this.cfgs=n;this.constructs=[];this.delay=200;this.wait=function(){var e=this;e.timeout=document.readyState.match(/interactive|loaded|complete/i)?e.start():setTimeout(function(){e.wait()},e.delay)};this.start=function(){for(var e=0,t=this.objs.length;e<t;e+=1){this.constructs[e]=new this.constructor(this.objs[e],Object.create(this.cfgs));this.constructs[e].start()}return null};this.getAll=function(){return this.constructs};this.getByObject=function(e){return this.constructs[this.constructs.indexOf(e)]};this.getByIndex=function(e){return this.constructs[e]}}})(window.useful=window.useful||{});(function(e){"use strict";var t=t||{};t.html5=function(){var e,t,n;n=["section","nav","article","aside","hgroup","header","footer","dialog","mark","dfn","time","progress","meter","ruby","rt","rp","ins","del","figure","figcaption","video","audio","source","canvas","datalist","keygen","output","details","datagrid","command","bb","menu","legend"];if(navigator.userAgent.match(/msie/gi))for(e=0,t=n.length;e<t;e+=1)document.createElement(n[e])};t.arrayIndexOf=function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,r=this.length;n<r;n+=1)if(this[n]===e)return n;return-1})};t.querySelectorAll=function(){document.querySelectorAll||(document.querySelectorAll=function(e){var t=document,n=t.documentElement.firstChild,r=t.createElement("STYLE");return n.appendChild(r),t.__qsaels=[],r.styleSheet.cssText=e+"{x:expression(document.__qsaels.push(this))}",window.scrollBy(0,0),t.__qsaels})};t.addEventListener=function(){!window.addEventListener&&function(e,t,n,r,i,s,o){e[r]=t[r]=n[r]=function(e,t){var n=this;o.unshift([n,e,t,function(e){e.currentTarget=n;e.preventDefault=function(){e.returnValue=!1};e.stopPropagation=function(){e.cancelBubble=!0};e.target=e.srcElement||n;t.call(n,e)}]);this.attachEvent("on"+e,o[0][3])};e[i]=t[i]=n[i]=function(e,t){for(var n=0,r;r=o[n];++n)if(r[0]==this&&r[1]==e&&r[2]==t)return this.detachEvent("on"+e,o.splice(n,1)[0][3])};e[s]=t[s]=n[s]=function(e){return this.fireEvent("on"+e.type,e)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[])};t.consoleLog=function(){if(!window.console){window.console={};window.console.log=function(){var e,t,n="",r=document.getElementById("reportPanel");if(!r){r=document.createElement("DIV");r.id="reportPanel";r.style.background="#fff none";r.style.border="solid 1px #000";r.style.color="#000";r.style.fontSize="12px";r.style.padding="10px";r.style.position=navigator.userAgent.indexOf("MSIE 6")>-1?"absolute":"fixed";r.style.right="10px";r.style.bottom="10px";r.style.width="180px";r.style.height="320px";r.style.overflow="auto";r.style.zIndex="100000";r.innerHTML="&nbsp;";document.body.appendChild(r)}var i=r.innerHTML.length<1e3?r.innerHTML:r.innerHTML.substring(0,800);for(e=0,t=arguments.length;e<t;e+=1)n+=arguments[e]+"<br/>";r.innerHTML=n+i}}};t.objectCreate=function(){typeof Object.create!="function"&&(Object.create=function(e){function t(){}t.prototype=e;return new t})};t.stringTrim=function(){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")});String.prototype.ltrim||(String.prototype.ltrim=function(){return this.replace(/^\s+/,"")});String.prototype.rtrim||(String.prototype.rtrim=function(){return this.replace(/\s+$/,"")});String.prototype.fulltrim||(String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")})};t.html5();t.arrayIndexOf();t.querySelectorAll();t.addEventListener();t.consoleLog();t.objectCreate();t.stringTrim()})(window.useful=window.useful||{});